$(document).ready((function(){$(document).on("input","#quantity",(function(){const t=$(this).data("id"),i=$(this).closest("tr").find('input[name="product_id"]').val(),e=$(this).val();let o=t||i;$.ajax({url:"/modify_qty/"+o,type:"POST",data:{quantity:e},success:function(t){Object.values(t.cart).forEach((function(t){$('.shipping_cost[data-id="'+t.product_id+'"]').text(t.shipping_cost.toFixed(2)+" €"),$('.total[data-id="'+t.product_id+'"]').text(t.total_with_shipping.toFixed(2)+" €")})),$("#total-without-shipping").text(t.totalCartWithoutShipping.toFixed(2)+" €"),$("#total-shipping").text(t.totalShipping.toFixed(2)+" €"),$("#total-with-shipping").text(t.totalCartWithShipping.toFixed(2)+" €")},error:function(t){}})})),function t(){$(".remove-product").off("click").on("click",(function(i){i.preventDefault();const e=$(this).data("id"),o=$(this).closest("tr").find('input[name="product_id"]').val();let a=e||o;if(""==e){let t=$(".cart-list").find('input[name="product_id"][value="'+o+'"]').closest("tr");if(t.length>0){t.remove(),delete cart[o];Object.keys(cart).length}}$.ajax({url:"/remove_product/"+a,type:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(i){i.success&&(0==i.nbItemsCart&&($(".cart").hide(),$(".ftco-cart").prepend('<div class="alert alert-danger text-center" id="error" role="alert">Votre panier est vide !</div>')),""!=e&&$(".product-list").html(i.html),$(".cart-items-count").text(i.nbItemsCart),$("#total-without-shipping").text(i.totalCartWithoutShipping.toFixed(2)+" €"),$("#total-shipping").text(i.totalShipping.toFixed(2)+" €"),$("#total-with-shipping").text(i.totalCartWithShipping.toFixed(2)+" €"),t())},error:function(t,i,e){}})}))}(),$("#wishlist-form").on("submit",(function(t){t.preventDefault();let i=$(this).serialize();$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:i,dataType:"json",success:function(t){t.success&&($("#wishlist").modal("hide"),window.location.href=t.redirect)},error:function(t,i,e){}})}))}));